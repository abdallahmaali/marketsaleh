import{_ as ue,x as pe,M as me,u as ce,n as ve,d as f,j as fe,p as he,e as ge,c as d,o as i,b as p,a as o,ai as _e,I as be,t as s,l as v,h as m,g as u,an as ye,af as D,A as x,B as M,q as g,ad as xe,G as $e,a6 as we}from"./app-D-Y-2pyd.js";import{_ as ke}from"./VerifyOtpModal-aXvj_2gM.js";import{r as j}from"./ExclamationTriangleIcon-CIHM8O2A.js";const Me={class:"p-3 md:p-4 xl:p-6"},Ve={class:"max-w-[920px] mx-auto bg-white rounded-xl md:rounded-2xl p-3 md:p-4 xl:p-6"},Ce={class:"p-4 bg-slate-50 rounded-xl border border-slate-100 relative"},Pe={class:"text-primary text-sm font-medium"},Ue={class:"flex flex-col gap-2 justify-center items-center"},De=["src"],je={class:"flex gap-2"},Ne={for:"upload",class:"text-white text-sm font-normal px-2 py-1 md:px-3 md:py-2 bg-slate-800 rounded-md cursor-pointer"},Se={key:1,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-green-200 text-green-600"},Be={class:"p-3 bg-white rounded-xl border border-slate-100 mt-3"},Ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-y-5 gap-x-6"},Ee={for:"name",class:"form-label"},Le=["placeholder"],Te={key:0,class:"text-red-500 text-sm"},Fe={for:"name",class:"form-label mb-2"},Ie={key:0,class:"text-red-500 text-sm"},Oe={for:"phone",class:"form-label justify-between"},Re={key:0,class:"flex items-center gap-1"},ze={key:1,class:"text-green-500 text-sm flex items-center gap-0.5"},Ge={class:"flex"},qe=["placeholder","maxlength"],He={key:0,class:"text-red-500 text-sm"},Ye={for:"gender",class:"form-label bg-transparent"},Je={value:"",disabled:"",selected:""},Ke={value:"male"},Qe={value:"female"},We={value:"other"},Xe={key:0,class:"text-red-500 text-sm"},Ze={for:"date",class:"form-label"},et={key:0,class:"text-red-500 text-sm"},tt={for:"email",class:"form-label justify-between"},ot={key:0,class:"flex items-center gap-1"},lt={key:1,class:"text-green-500 text-sm flex items-center gap-0.5"},at={key:0,class:"text-red-500 text-sm"},st={key:0,type:"submit",class:"bg-primary px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-white mt-6"},rt={key:1,type:"button",class:"bg-primary-200 px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-primary mt-6 flex items-center justify-center cursor-not-allowed gap-2",disabled:""},nt={__name:"MyProfile",setup(dt){var N,S,B,A,E,L,T,F;const le=pe(),V=me(),c=ce(),n=ve(),a=f(null),$=f(!1),w=f(null),k=f(!1),C=f(!1),P=()=>{C.value=!0},ae=()=>{var e;w.value=(e=n.user)==null?void 0:e.profile_photo,k.value=!1},se=e=>{w.value=URL.createObjectURL(e.target.files[0]),l.value.profile_photo=e.target.files[0],k.value=!0},l=f({name:(N=n.user)==null?void 0:N.name,phone:(S=n.user)==null?void 0:S.phone,gender:(B=n.user)!=null&&B.gender?(A=n.user)==null?void 0:A.gender:"",date_of_birth:(E=n.user)==null?void 0:E.date_of_birth,email:(L=n.user)==null?void 0:L.email,profile_photo:null,phone_code:(T=n.user)==null?void 0:T.phone_code,country:(F=n.user)==null?void 0:F.country}),U=f([]),re=f(!1);fe(()=>{var e,t;n.user&&(w.value=(e=n.user)==null?void 0:e.profile_photo),window.scrollTo(0,0),((t=n.user)==null?void 0:t.email)==="user@readyecommerce.com"&&(re.value=!0),ne()}),he(()=>l.value.country,e=>{const t=U.value.find(h=>h.name==e);l.value.phone_code=t==null?void 0:t.phone_code});const ne=()=>{axios.get("/countries").then(e=>{U.value=e.data.data.countries})},de={component:we,props:{title:"Profile Updated",message:"Your profile updated successfully"}},ie=()=>{const e=new FormData;e.append("name",l.value.name),e.append("phone",l.value.phone),e.append("gender",l.value.gender?l.value.gender:""),e.append("date_of_birth",l.value.date_of_birth?l.value.date_of_birth:""),e.append("email",l.value.email?l.value.email:""),e.append("country",l.value.country?l.value.country:""),e.append("phone_code",l.value.phone_code?l.value.phone_code:""),l.value.profile_photo&&e.append("profile_photo",l.value.profile_photo),$.value=!0,axios.post("/update-profile",e,{headers:{Authorization:n.token}}).then(t=>{n.user=t.data.data.user,k.value=!1,$.value=!1,V(de,{type:"default",hideProgressBar:!0,icon:!1,position:c.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value={}}).catch(t=>{var h,_,b,y;if($.value=!1,t.response.status===401){n.logout(),le.push("/");return}V.error((_=(h=t.response)==null?void 0:h.data)==null?void 0:_.message,{position:c.langDirection==="rtl"?"bottom-right":"bottom-left"}),a.value=t.response.data.errors,(b=a.value)!=null&&b.profile_photo&&V.error((y=a.value)==null?void 0:y.profile_photo[0],{position:c.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(e,t)=>{var _,b,y,I,O,R,z,G,q,H,Y,J,K,Q,W,X,Z,ee,te,oe;const h=ge("v-select");return i(),d("div",null,[p(_e,{title:e.$t("My Profile")},null,8,["title"]),o("div",Me,[o("form",{onSubmit:t[10]||(t[10]=be(r=>ie(),["prevent"]))},[o("div",Ve,[o("div",Ce,[o("div",Pe,s(e.$t("Profile Picture")),1),o("div",Ue,[o("img",{src:w.value,alt:"",class:"w-24 h-24 md:w-36 md:h-36 bg-white rounded-full object-cover"},null,8,De),o("div",je,[o("label",Ne,[o("input",{type:"file",id:"upload",class:"hidden",onChange:se},null,32),m(" "+s(e.$t("Change Photo")),1)]),k.value?(i(),d("button",{key:0,class:"px-2 py-1 md:px-3 md:py-2 bg-red-500 text-white rounded-md",onClick:ae},[p(u(ye),{class:"w-5 h-5"})])):v("",!0)])]),(_=u(n).user)!=null&&_.account_verified?(i(),d("div",Se,[p(u(D),{class:"w-5 h-5"}),m(" "+s(e.$t("Verified")),1)])):(i(),d("div",{key:0,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-red-200 text-red-600",onClick:t[0]||(t[0]=r=>P())},[p(u(j),{class:"w-5 h-5"}),m(" "+s(e.$t("Unverified")),1)]))]),o("div",Be,[o("div",Ae,[o("div",null,[o("label",Ee,s(e.$t("Name")),1),x(o("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=r=>l.value.name=r),placeholder:e.$t("Enter name"),class:g(["form-input",a.value&&((b=a.value)!=null&&b.name)?"border-red-500":"border-slate-200"])},null,10,Le),[[M,l.value.name]]),a.value&&((y=a.value)!=null&&y.name)?(i(),d("span",Te,s((I=a.value)==null?void 0:I.name[0]),1)):v("",!0)]),o("div",null,[o("label",Fe,s(e.$t("Country")),1),p(h,{options:U.value,label:"name",reduce:r=>r.name,modelValue:l.value.country,"onUpdate:modelValue":t[2]||(t[2]=r=>l.value.country=r),placeholder:e.$t("Select Country"),dir:u(c).langDirection||"ltr"},null,8,["options","reduce","modelValue","placeholder","dir"]),a.value&&((O=a.value)!=null&&O.country)?(i(),d("span",Ie,s((R=a.value)==null?void 0:R.country[0]),1)):v("",!0)]),o("div",null,[o("label",Oe,[m(s(e.$t("Mobile Number"))+" ",1),u(c).register_otp_type=="phone"?(i(),d("div",Re,[(z=u(n).user)!=null&&z.email_verified?(i(),d("span",ze,[p(u(D),{class:"w-4 h-4"}),m(" "+s(e.$t("Verified")),1)])):(i(),d("span",{key:0,class:"text-red-400 text-sm flex items-center gap-0.5 cursor-pointer",onClick:t[3]||(t[3]=r=>P())},[p(u(j),{class:"w-4 h-4"}),m(" "+s(e.$t("Unverified")),1)]))])):v("",!0)]),o("div",Ge,[o("span",{class:g(["text-slate-700 text-base font-normal leading-normal bg-slate-100 p-2 border-y flex items-center",u(c).langDirection=="rtl"?"border-r rounded-tr-lg rounded-br-lg":"border-l rounded-tl-lg rounded-bl-lg"])}," +"+s(l.value.phone_code||"00"),3),x(o("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>l.value.phone=r),placeholder:e.$t("Enter phone number"),class:g(["text-base font-normal w-full p-3 placeholder:text-slate-400 border focus:border-primary outline-none",[(G=a.value)!=null&&G.phone?"border-red-500":"border-slate-200",u(c).langDirection=="rtl"?"rounded-tl-lg rounded-bl-lg":"rounded-tr-lg rounded-br-lg"]]),maxlength:u(c).phoneMaxLength,onInput:t[5]||(t[5]=r=>l.value.phone=l.value.phone.replace(/[^\d]/g,""))},null,42,qe),[[M,l.value.phone]])]),a.value&&((q=a.value)!=null&&q.phone)?(i(),d("span",He,s((H=a.value)==null?void 0:H.phone[0]),1)):v("",!0)]),o("div",null,[o("label",Ye,s(e.$t("Gender")),1),x(o("select",{name:"gender",id:"gender","onUpdate:modelValue":t[6]||(t[6]=r=>l.value.gender=r),class:g(["form-input bg-transparent h-[52px]",a.value&&((Y=a.value)!=null&&Y.gender)?"border-red-500":"border-slate-200"])},[o("option",Je,s(e.$t("Select a gender")),1),o("option",Ke,s(e.$t("Male")),1),o("option",Qe,s(e.$t("Female")),1),o("option",We,s(e.$t("Other")),1)],2),[[xe,l.value.gender]]),a.value&&((J=a.value)!=null&&J.gender)?(i(),d("span",Xe,s((K=a.value)==null?void 0:K.gender[0]),1)):v("",!0)]),o("div",null,[o("label",Ze,s(e.$t("Date of Birth")),1),x(o("input",{type:"date",id:"date","onUpdate:modelValue":t[7]||(t[7]=r=>l.value.date_of_birth=r),class:g(["form-input",a.value&&((Q=a.value)!=null&&Q.date_of_birth)?"border-red-500":"border-slate-200"])},null,2),[[M,l.value.date_of_birth]]),a.value&&((W=a.value)!=null&&W.date_of_birth)?(i(),d("span",et,s((X=a.value)==null?void 0:X.date_of_birth[0]),1)):v("",!0)]),o("div",null,[o("label",tt,[m(s(e.$t("Email Address"))+" ",1),u(c).register_otp_type=="email"?(i(),d("div",ot,[(Z=u(n).user)!=null&&Z.email_verified?(i(),d("span",lt,[p(u(D),{class:"w-4 h-4"}),m(" "+s(e.$t("Verified")),1)])):(i(),d("span",{key:0,class:"text-red-400 text-sm flex items-center gap-0.5 cursor-pointer",onClick:t[8]||(t[8]=r=>P())},[p(u(j),{class:"w-4 h-4"}),m(" "+s(e.$t("Unverified")),1)]))])):v("",!0)]),x(o("input",{type:"email",id:"email","onUpdate:modelValue":t[9]||(t[9]=r=>l.value.email=r),class:g(["form-input",a.value&&((ee=a.value)!=null&&ee.email)?"border-red-500":"border-slate-200"]),placeholder:"Enter email"},null,2),[[M,l.value.email]]),a.value&&((te=a.value)!=null&&te.email)?(i(),d("span",at,s((oe=a.value)==null?void 0:oe.email[0]),1)):v("",!0)])]),$.value?(i(),d("button",rt,[m(s(e.$t("Processing"))+" ",1),p($e)])):(i(),d("button",st,s(e.$t("Update Profile")),1))])])],32)]),p(ke,{showModal:C.value,onHideModal:t[11]||(t[11]=r=>C.value=!1)},null,8,["showModal"])])}}},mt=ue(nt,[["__scopeId","data-v-f2604f5c"]]);export{mt as default};
