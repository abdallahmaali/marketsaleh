import{_ as I,u as K,d as v,z as O,j as P,p as $,e as R,c as r,o,l as u,a as t,t as a,b as y,w as N,g as m,A as U,B as q,C as G,q as B,D,f as H,E as T,h as J,G as L}from"./app-D-Y-2pyd.js";const Q={class:"shop-search-by-country"},W={key:0,class:"mb-6"},X={class:"text-slate-950 text-xl font-medium leading-7"},Y={class:"text-slate-500 text-sm mt-1"},Z={class:"flex flex-col md:flex-row gap-4 items-end"},ee={class:"w-full md:w-1/3"},te={class:"text-slate-700 text-base font-normal leading-normal mb-2 block"},ae={class:"flex items-center gap-2"},se={key:0,class:"text-lg"},le={class:"flex items-center gap-2"},oe={key:0,class:"text-lg"},ne={class:"w-full md:w-1/2"},re={class:"text-slate-700 text-base font-normal leading-normal mb-2 block"},ue={class:"relative"},ce=["placeholder"],ie={class:"w-full md:w-auto"},de=["disabled"],he={key:1,class:"mt-4 flex flex-wrap gap-2"},me={class:"text-sm text-slate-600"},pe={key:0,class:"flex items-center gap-1 bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm"},ve={key:0},ye={key:1,class:"flex items-center gap-1 bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm"},fe={key:2,class:"mt-4 text-sm text-slate-600"},_e={key:0},ge={key:1},be={__name:"ShopSearchByCountry",props:{showTitle:{type:Boolean,default:!0},showResultsCount:{type:Boolean,default:!0},initialCountry:{type:Object,default:null},initialSearchName:{type:String,default:""},autoSearch:{type:Boolean,default:!0},debounceDelay:{type:Number,default:500},resultsCount:{type:Number,default:0}},emits:["search","countryChange","nameChange","clear"],setup(f,{expose:V,emit:A}){const b=K(),n=f,d=A,C=v([]),s=v(n.initialCountry),l=v(n.initialSearchName),_=v(!1),x=v(!1);let S=null;const w=O(()=>s.value||l.value),F=async()=>{try{const e=await axios.get("/countries");C.value=e.data.data.countries}catch(e){console.error("Error fetching countries:",e)}},j=e=>{s.value=e,d("countryChange",e),n.autoSearch&&c()},E=()=>{d("nameChange",l.value),n.autoSearch&&(clearTimeout(S),S=setTimeout(()=>{c()},n.debounceDelay))},c=()=>{var h,g;_.value=!0,x.value=!0;const e={country:s.value,name:l.value.trim(),country_id:((h=s.value)==null?void 0:h.id)||null,country_name:((g=s.value)==null?void 0:g.name)||null,search:l.value.trim()};d("search",e),setTimeout(()=>{_.value=!1},300)},M=()=>{s.value=null,d("countryChange",null),n.autoSearch&&c()},z=()=>{l.value="",d("nameChange",""),n.autoSearch&&c()},k=()=>{s.value=null,l.value="",x.value=!1,d("clear"),d("countryChange",null),d("nameChange",""),n.autoSearch&&c()};return V({setCountry:e=>{s.value=e},setSearchName:e=>{l.value=e},reset:()=>{k()},performSearch:c}),P(()=>{F(),w.value&&n.autoSearch&&c()}),$(()=>n.initialCountry,e=>{s.value=e}),$(()=>n.initialSearchName,e=>{l.value=e}),(e,h)=>{const g=R("v-select");return o(),r("div",Q,[f.showTitle?(o(),r("div",W,[t("h2",X,a(e.$t("Search Shops by Country")),1),t("p",Y,a(e.$t("Find shops in your preferred location")),1)])):u("",!0),t("div",Z,[t("div",ee,[t("label",te,a(e.$t("Country")),1),y(g,{options:C.value,label:"name",reduce:i=>i,modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=i=>s.value=i),placeholder:e.$t("Select Country"),class:"border border-slate-200 rounded-lg",dir:m(b).langDirection||"ltr","onOption:selected":j,clearable:!0},{option:N(({name:i,flag:p})=>[t("div",ae,[p?(o(),r("span",se,a(p),1)):u("",!0),t("span",null,a(i),1)])]),"selected-option":N(({name:i,flag:p})=>[t("div",le,[p?(o(),r("span",oe,a(p),1)):u("",!0),t("span",null,a(i),1)])]),_:1},8,["options","reduce","modelValue","placeholder","dir"])]),t("div",ne,[t("label",re,a(e.$t("Shop Name")),1),t("div",ue,[U(t("input",{type:"text","onUpdate:modelValue":h[1]||(h[1]=i=>l.value=i),placeholder:e.$t("Search shop by name"),class:B(["w-full p-3 border border-slate-200 rounded-lg focus:border-primary outline-none text-base font-normal",m(b).langDirection==="rtl"?"text-right":"text-left"]),onInput:E,onKeyup:G(c,["enter"])},null,42,ce),[[q,l.value]]),y(m(D),{class:B(["w-5 h-5 text-slate-400 absolute top-1/2 -translate-y-1/2",m(b).langDirection==="rtl"?"left-3":"right-3"])},null,8,["class"])])]),t("div",ie,[t("button",{onClick:c,class:"w-full md:w-auto px-6 py-3 bg-primary hover:bg-primary-600 text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center gap-2",disabled:_.value},[y(m(D),{class:"w-5 h-5"}),t("span",null,a(e.$t("Search Shops")),1),_.value?(o(),H(L,{key:0,class:"w-4 h-4"})):u("",!0)],8,de)])]),w.value?(o(),r("div",he,[t("span",me,a(e.$t("Active filters"))+":",1),s.value?(o(),r("div",pe,[s.value.flag?(o(),r("span",ve,a(s.value.flag),1)):u("",!0),t("span",null,a(s.value.name),1),t("button",{onClick:M,class:"ml-1 hover:text-primary-900"},[y(m(T),{class:"w-4 h-4"})])])):u("",!0),l.value?(o(),r("div",ye,[t("span",null,'"'+a(l.value)+'"',1),t("button",{onClick:z,class:"ml-1 hover:text-primary-900"},[y(m(T),{class:"w-4 h-4"})])])):u("",!0),t("button",{onClick:k,class:"text-sm text-slate-500 hover:text-slate-700 underline"},a(e.$t("Clear all")),1)])):u("",!0),f.showResultsCount&&x.value?(o(),r("div",fe,[J(a(e.$t("Found"))+" "+a(f.resultsCount)+" "+a(e.$t("shops"))+" ",1),s.value?(o(),r("span",_e,a(e.$t("in"))+" "+a(s.value.name),1)):u("",!0),l.value?(o(),r("span",ge,a(e.$t("matching"))+' "'+a(l.value)+'"',1)):u("",!0)])):u("",!0)])}}},ke=I(be,[["__scopeId","data-v-b2e4dc00"]]);export{ke as S};
